{"id":"system-config-13y","title":"Add passwordless sudo for darwin-rebuild","status":"closed","priority":2,"issue_type":"task","owner":"john@threedogconsulting.com","created_at":"2026-01-14T09:29:16.699781-05:00","created_by":"John Allen","updated_at":"2026-01-14T09:29:33.815174-05:00","closed_at":"2026-01-14T09:29:33.815174-05:00","close_reason":"Implemented via sudoers.d drop-in file"}
{"id":"system-config-1e4","title":"Create bottombar plugin for feishin/nowplaying-cli","description":"The mpd-updater bottombar plugin was disabled when switching to feishin. Create a new plugin that uses nowplaying-cli to display current track info in the bottombar.\n\nRequirements:\n- Show current track title, artist, album\n- Show play/pause state icon\n- Optionally show album art (nowplaying-cli can output artwork path)\n\nReference: existing mpd-updater at ~/.config/bottombar/plugins/mpd-updater\n\nParent issue: system-config-hhv","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-08T15:30:34.078518-05:00","created_by":"john.allen","updated_at":"2026-01-08T20:10:22.352497-05:00","closed_at":"2026-01-08T20:10:22.352497-05:00","close_reason":"Implemented bottombar plugin for feishin with album art from Navidrome API, play/pause icon, and track info display"}
{"id":"system-config-2b1","title":"Music script enhancements: repeat, status bar, restart","description":"Enhancements to ~/bin/music script:\n1. Toggle repeat playlist - add 'repeat' command to cycle playlist loop mode\n2. Display repeat status in bottom bar - show indicator only when repeat is enabled\n3. Restart playlist - add 'restart' command to jump to beginning of playlist","status":"closed","priority":2,"issue_type":"feature","owner":"john@threedogconsulting.com","created_at":"2026-01-15T08:20:47.616077-05:00","created_by":"John Allen","updated_at":"2026-01-15T08:21:40.320096-05:00","closed_at":"2026-01-15T08:21:40.320096-05:00","close_reason":"Implemented all three enhancements: repeat toggle, status indicator, and restart command"}
{"id":"system-config-3bl","title":"Install Infuse from Mac App Store","description":"Install Infuse video player via mas (Mac App Store CLI)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T16:41:22.721906-05:00","created_by":"john.allen","updated_at":"2026-01-08T16:41:46.159573-05:00","closed_at":"2026-01-08T16:41:46.159573-05:00","close_reason":"Closed"}
{"id":"system-config-3ey","title":"Adapt play script for MPV","description":"Port the old MPD-based play script to work with MPV. Maps artist shortcuts to albums.","status":"closed","priority":2,"issue_type":"feature","owner":"john@threedogconsulting.com","created_at":"2026-01-15T08:42:05.811193-05:00","created_by":"John Allen","updated_at":"2026-01-15T08:53:15.661427-05:00","closed_at":"2026-01-15T08:53:15.661427-05:00","close_reason":"Closed"}
{"id":"system-config-4at","title":"Fix mpv-queue nix build failing on socket file","status":"closed","priority":2,"issue_type":"bug","owner":"john@threedogconsulting.com","created_at":"2026-01-23T17:12:58.769024-05:00","created_by":"John Allen","updated_at":"2026-01-23T17:13:03.049655-05:00","closed_at":"2026-01-23T17:13:03.049655-05:00","close_reason":"Fixed by using lib.cleanSourceWith to filter .beads, .git, and target directories from mpv-queue source"}
{"id":"system-config-51q","title":"Replace music script with mpv-queue alias","status":"closed","priority":2,"issue_type":"task","owner":"john@threedogconsulting.com","created_at":"2026-01-23T17:26:37.764139-05:00","created_by":"John Allen","updated_at":"2026-01-23T17:28:33.851673-05:00","closed_at":"2026-01-23T17:28:33.851673-05:00","close_reason":"Deleted music script and added shell alias pointing to mpv-queue"}
{"id":"system-config-5fi","title":"Music enhancements: shuffle, recursive dirs, FA icons, status cleanup","description":"Additional music improvements:\n- Add shuffle toggle command\n- Support recursive directory loading for artist folders\n- Use Font Awesome icons in bottombar (play/pause, repeat, shuffle)\n- Clean up track names in music status output","status":"closed","priority":2,"issue_type":"feature","owner":"john@threedogconsulting.com","created_at":"2026-01-15T10:29:27.791547-05:00","created_by":"John Allen","updated_at":"2026-01-15T10:29:33.077321-05:00","closed_at":"2026-01-15T10:29:33.077321-05:00","close_reason":"Implemented all enhancements: shuffle toggle, recursive dir loading, Font Awesome icons in bottombar, cleaner track names in status"}
{"id":"system-config-63t","title":"Configure lf file manager with previews","status":"closed","priority":2,"issue_type":"task","owner":"john@threedogconsulting.com","created_at":"2026-01-16T17:14:18.35867-05:00","created_by":"John Allen","updated_at":"2026-01-16T17:14:25.29747-05:00","closed_at":"2026-01-16T17:14:25.29747-05:00","close_reason":"Configured lf with image previews (kitty protocol), parquet/xlsx/docx support, and proper file opener"}
{"id":"system-config-67w","title":"Restyle shuffle/repeat as independent colorful widgets","status":"closed","priority":2,"issue_type":"task","owner":"john@threedogconsulting.com","created_at":"2026-01-15T12:49:23.077839-05:00","created_by":"John Allen","updated_at":"2026-01-15T12:49:29.082279-05:00","closed_at":"2026-01-15T12:49:29.082279-05:00","close_reason":"Implemented separate shuffle/repeat widgets with blue and grey backgrounds"}
{"id":"system-config-6c8","title":"install copilot-cli","description":"choose the best path for instillation. prefer nix packages, fall back to brew. https://github.com/github/copilot-cli","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-06T12:43:55.947148-05:00","created_by":"john.allen","updated_at":"2026-01-06T12:46:52.985562-05:00","closed_at":"2026-01-06T12:46:52.985562-05:00","close_reason":"Closed"}
{"id":"system-config-865","title":"Speed up music status command","description":"Optimize the status command by replacing bash for-loop with single jq call, reducing ~9 subprocess calls per track to 1 total","status":"closed","priority":3,"issue_type":"task","owner":"john@threedogconsulting.com","created_at":"2026-01-23T16:08:25.953323-05:00","created_by":"John Allen","updated_at":"2026-01-23T16:08:30.047396-05:00","closed_at":"2026-01-23T16:08:30.047396-05:00","close_reason":"Replaced bash for-loop with single jq call to process all tracks"}
{"id":"system-config-9lv","title":"Add --debug flag to music/play scripts to suppress JSON output","status":"closed","priority":2,"issue_type":"task","owner":"john@threedogconsulting.com","created_at":"2026-01-23T09:16:43.293224-05:00","created_by":"John Allen","updated_at":"2026-01-23T09:16:48.108169-05:00","closed_at":"2026-01-23T09:16:48.108169-05:00","close_reason":"Added cmd_quiet() function to music script that suppresses JSON output by default. Both music and play scripts now accept --debug flag to show MPV responses when troubleshooting."}
{"id":"system-config-9mv","title":"Add vim-style navigation to mpv-queue browse mode","description":"Add ctrl+d/u for half-page jumps and /? for search","status":"tombstone","priority":2,"issue_type":"feature","owner":"john@threedogconsulting.com","created_at":"2026-01-23T17:52:51.906086-05:00","created_by":"John Allen","updated_at":"2026-01-24T11:34:27.657702-05:00","close_reason":"Added ctrl+d/u half-page jumps and /? vim-style search with n/N for next/prev","deleted_at":"2026-01-24T11:34:27.657702-05:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"system-config-bjp","title":"Fix mpv shuffle not working on playlist load","status":"closed","priority":2,"issue_type":"bug","owner":"john@threedogconsulting.com","created_at":"2026-01-21T12:43:36.460019-05:00","created_by":"John Allen","updated_at":"2026-01-21T12:43:49.479235-05:00","closed_at":"2026-01-21T12:43:49.479235-05:00","close_reason":"Fixed by adding playlist-shuffle command after loading tracks"}
{"id":"system-config-bps","title":"consider mods","description":"is this the general purpos cli llm tool you have been looking for?\n\nhttps://llm.datasette.io/en/stable/\nhttps://github.com/sigoden/aichat\nhttps://github.com/charmbracelet/mods\n","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T12:10:33.002967-05:00","created_by":"john.allen","updated_at":"2026-01-08T20:35:37.613852-05:00","closed_at":"2026-01-08T20:35:37.613852-05:00","close_reason":"Installed all three tools: aichat (nix), mods (nix), llm (brew)"}
{"id":"system-config-cm7","title":"install supersonic","description":"https://github.com/dweymouth/supersonic","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T14:37:30.626722-05:00","created_by":"john.allen","updated_at":"2026-01-08T14:41:54.44672-05:00","closed_at":"2026-01-08T14:41:54.44672-05:00","close_reason":"Closed"}
{"id":"system-config-db7","title":"improve mpv music experience","description":"\n- if possible add current track length and total length to bottom bar. this existed in mpd implementation (recently removed) had this\n- improve the now-playing script. currently just shows the playlist. can we make this at least more tabular? can we indicate current track?\n- add a music-play stcript\n","status":"closed","priority":2,"issue_type":"feature","owner":"john@threedogconsulting.com","created_at":"2026-01-13T16:14:28.415189-05:00","created_by":"John Allen","updated_at":"2026-01-13T19:09:16.089454-05:00","closed_at":"2026-01-13T19:10:00-05:00"}
{"id":"system-config-dez","title":"Document sketchybar reload behavior","description":"When sketchybar is killed and restarts, the Lua event loop doesn't reinitialize - items appear but callbacks never fire. Use 'sketchybar --reload' instead of kill/restart.","status":"closed","priority":3,"issue_type":"task","owner":"john@threedogconsulting.com","created_at":"2026-01-23T16:11:00.134853-05:00","created_by":"John Allen","updated_at":"2026-01-23T16:11:16.145481-05:00","closed_at":"2026-01-23T16:11:16.145481-05:00","close_reason":"Added note to sketchybarrc"}
{"id":"system-config-fye","title":"Remove MPD-related code and centralize music library path","description":"Removed all MPD/ncmpcpp related code from the repository since MPD is no longer in use. Also centralized the music library path in common.nix.\n\n## Changes\n\n### Deleted files/directories:\n- dotfiles/config/mpd/ (directory)\n- dotfiles/config/ncmpcpp/ (directory)\n- dotfiles/config/bottombar/items/mpd.lua\n- dotfiles/config/bottombar/items/art.lua\n- dotfiles/config/bottombar/items/center_bracket.lua\n- dotfiles/config/bottombar/plugins/mpd.sh\n- dotfiles/config/bottombar/plugins/music.sh\n- dotfiles/config/bottombar/sketchybarrc.sh\n- dotfiles/config/sketchybar/plugins/mpd.sh\n- dotfiles/config/sketchybar/plugins/mpd-bash.sh\n- dotfiles/bin/play\n\n### Modified files:\n- modules/common/common.nix - added musicLibraryPath for shell alias\n- dotfiles/bin/service - removed Mpd service variant\n- dotfiles/config/bottombar/README.md - removed MPD mention\n- dotfiles/config/sketchybar/sketchybarrc.sh - removed commented mpd section","status":"closed","priority":2,"issue_type":"chore","owner":"john@threedogconsulting.com","created_at":"2026-01-13T16:08:05.505574-05:00","created_by":"John Allen","updated_at":"2026-01-13T16:08:10.332186-05:00","closed_at":"2026-01-13T16:08:10.332186-05:00","close_reason":"Closed"}
{"id":"system-config-hhv","title":"Switch from mpd to feishin (Navidrome client)","description":"mpd has been unstable on macOS. Switch to feishin (Navidrome client) which supports macOS media keys.\n\nTasks:\n- [ ] Install feishin via nix packages\n- [ ] Update music-toggle-play-pause and music-pause scripts to use nowplaying-cli\n- [ ] Remove mpd, mpc, ncmpcpp packages\n- [ ] Remove mpd launchd agent\n- [ ] Update/remove mpd-updater bottombar plugin\n\nRelated commit: 2b9d801 (original mpd switch from Apple Music)","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T15:13:31.848339-05:00","created_by":"john.allen","updated_at":"2026-01-08T16:35:56.130665-05:00","closed_at":"2026-01-08T16:35:56.130665-05:00","close_reason":"Closed"}
{"id":"system-config-i70","title":"Add Noah Kahan, Caamp, and Ray LaMontagne albums to play script","description":"Added three new albums to the play script shortcuts:\n- Noah Kahan 'Cape Elizabeth' (shorthand: noah)\n- Caamp 'Lavender Days' (shorthand: caamp)\n- Ray LaMontagne 'Ouroboros' (shorthand: ray)\n\nAll entries added in alphabetical order to both the case statement and usage output.","status":"closed","priority":2,"issue_type":"task","owner":"john@threedogconsulting.com","created_at":"2026-01-23T08:44:27.661311-05:00","created_by":"John Allen","updated_at":"2026-01-23T08:44:30.276603-05:00","closed_at":"2026-01-23T08:44:30.276603-05:00","close_reason":"Closed"}
{"id":"system-config-jdf","title":"mpv-updater: repeat indicator not responding to L key toggle","description":"## Problem\nThe repeat indicator in bottombar always showed \"on\" even when toggling repeat with the L key in mpv.\n\n## Root Cause\nThe mpv-updater script was only checking `loop-playlist` property, but mpv's default 'L' keybinding toggles `loop-file` (single track repeat), not `loop-playlist`.\n\n## Solution\nUpdated the script to check both `loop-file` and `loop-playlist` properties. The repeat indicator now shows when either property is set to \"inf\".\n\n## Files Changed\n- `modules/home-manager/dotfiles/config/bottombar/plugins/mpv-updater`","status":"closed","priority":2,"issue_type":"task","owner":"john@threedogconsulting.com","created_at":"2026-01-26T15:14:52.949403-05:00","created_by":"John Allen","updated_at":"2026-01-26T15:14:58.656748-05:00","closed_at":"2026-01-26T15:14:58.656748-05:00","close_reason":"fixed"}
{"id":"system-config-nrp","title":"Music script: jump to track N","description":"Add command to jump to a specific track number in the playlist (e.g. music jump 5 to play track 5)","status":"closed","priority":2,"issue_type":"feature","owner":"john@threedogconsulting.com","created_at":"2026-01-15T08:37:09.721436-05:00","created_by":"John Allen","updated_at":"2026-01-15T08:37:36.608923-05:00","closed_at":"2026-01-15T08:37:36.608923-05:00","close_reason":"Added jump command to play specific track by number"}
{"id":"system-config-to6","title":"Add mpv-queue nix package","description":"Add mpv-queue Rust TUI to nix home-manager packages. Created mpv-queue.nix derivation pointing to local source in ~/dev/src/playground/mpv-queue.","status":"closed","priority":2,"issue_type":"task","owner":"john@threedogconsulting.com","created_at":"2026-01-23T16:50:38.644127-05:00","created_by":"John Allen","updated_at":"2026-01-23T16:50:44.767653-05:00","closed_at":"2026-01-23T16:50:44.767653-05:00","close_reason":"Added mpv-queue.nix derivation and wired into home.packages"}
{"id":"system-config-vgu","title":"mpv music: tracks resume mid-song due to watch-later","status":"closed","priority":2,"issue_type":"bug","owner":"john@threedogconsulting.com","created_at":"2026-01-22T08:22:12.179448-05:00","created_by":"John Allen","updated_at":"2026-01-22T08:30:45.612443-05:00","closed_at":"2026-01-22T08:30:45.612443-05:00","close_reason":"Added --no-resume-playback to mpv-music daemon launch args","comments":[{"id":1,"issue_id":"system-config-vgu","author":"John Allen","text":"## Problem\n\nWhen listening to an album and switching to a different one mid-track, mpv's save-position-on-quit=yes setting saves the playback position for that specific audio file. Later when that track plays again (same file path), it resumes from the saved position instead of the beginning.\n\n## Root Cause\n\nmodules/home-manager/dotfiles/config/mpv/mpv.conf has:\n  save-position-on-quit=yes\n\nThis creates watch-later files in ~/.local/state/mpv/watch_later/ for every file that doesn't finish playing.\n\n## Proposed Solution\n\nAdd --no-resume-playback flag when loading new music content. This tells mpv to ignore any saved watch-later positions for the files being loaded.\n\nImplementation: In modules/home-manager/dotfiles/bin/music, modify the open command to pass no-resume-playback=yes as a file-local option.\n\nWhy this approach:\n- Keeps save-position-on-quit=yes in mpv.conf for video use cases\n- Music always starts from the beginning of each track\n- No need to clear watch-later files\n- Simple, targeted fix\n\n## Alternative Approaches\n\n1. Disable save-position-on-quit entirely - Would affect video playback too\n2. Clear watch-later files for audio on load - Adds complexity\n3. Separate mpv config for music daemon - More complex setup","created_at":"2026-01-22T13:22:37Z"},{"id":2,"issue_id":"system-config-vgu","author":"John Allen","text":"## Revised Fix\n\nInitial approach (file-local options on loadfile) caused issues - mpv behaved unexpectedly when loading files that were currently playing.\n\nNew approach: Add --no-resume-playback to the mpv-music daemon launch arguments in modules/darwin/agents/default.nix. This cleanly separates the music daemon (never resumes) from regular video mpv (uses mpv.conf settings).\n\nThis is the correct fix because:\n- The music daemon is a dedicated service, so we can configure it separately\n- No need for per-file options or runtime property changes\n- Video mpv keeps its save-position-on-quit behavior","created_at":"2026-01-22T13:30:41Z"}]}
{"id":"system-config-vjz","title":"move to mpv for music","description":"i am trying yet another option from music. i have recently moved from apple music to mpd to navidrom/feishin. no i want to move to mpv. take alook at 83cf7b4 for recent example. in addition to making the bottom bar work i want:\n- use lf to browse and queue music. bring the following under nix control:\n    - ~/.config/lf/lfrc\n    - ~/.config/mpv/mpv.conf\n    - ~/bin/mpv-open\n    - ~/bin/now-playing\n- add a launchctl (or similar) that launche mpv in background with --input-ipc-server=/tmp/mpv-music.sock\n","status":"closed","priority":2,"issue_type":"feature","owner":"john@threedogconsulting.com","created_at":"2026-01-13T09:31:43.888954-05:00","created_by":"John Allen","updated_at":"2026-01-13T19:09:16.090091-05:00","closed_at":"2026-01-13T16:20:00-05:00"}
{"id":"system-config-wcf","title":"Fix bottombar not displaying MPV music info - PATH issue in mpv-updater script","description":"The bottombar was not displaying any music info from MPV. Investigation revealed that the mpv-updater script was failing because commands like 'bottombar', 'jq', 'socat', and 'ffmpeg' were not in the PATH when launched from the Lua sketchybarrc. The fix adds an explicit PATH export at the top of the mpv-updater script to include nix-installed binaries.","status":"closed","priority":2,"issue_type":"task","owner":"john@threedogconsulting.com","created_at":"2026-01-13T14:14:37.896715-05:00","created_by":"John Allen","updated_at":"2026-01-13T14:18:41.46996-05:00","closed_at":"2026-01-13T14:18:41.469964-05:00"}
{"id":"system-config-ykd","title":"Fix bottombar missing album name for mpv","status":"closed","priority":2,"issue_type":"bug","owner":"john@threedogconsulting.com","created_at":"2026-01-19T11:41:57.31789-05:00","created_by":"John Allen","updated_at":"2026-01-19T11:42:03.55574-05:00","closed_at":"2026-01-19T11:42:03.55574-05:00","close_reason":"Added album metadata fetching and display to mpv-updater script"}
{"id":"system-config-zbh","title":"Investigate MPV playback mode for elapsed time via IPC socket","description":"Feishin can use MPV for playback instead of web player. MPV exposes an IPC socket that can be queried for time-pos (elapsed time). If feishin creates an MPV socket when using MPV playback mode, we could query it from the bottombar plugin to display elapsed/total time.\n\nSteps:\n1. Switch feishin to MPV playback mode in settings\n2. Check if an MPV IPC socket is created (look in /tmp or feishin config dir)\n3. If socket exists, query it with: echo '{\"command\": [\"get_property\", \"time-pos\"]}' | socat - /path/to/socket\n4. If working, update feishin-updater script to poll the socket for time info\n\nRelated: system-config-1e4 (bottombar feishin plugin)","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-08T18:30:27.268527-05:00","created_by":"john.allen","updated_at":"2026-01-08T18:30:37.858055-05:00"}
